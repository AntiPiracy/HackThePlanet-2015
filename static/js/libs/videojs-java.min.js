/*! videojs-java - v0.1.0 - 2015-01-11
* Copyright (c) 2015 Afterster; Licensed Apache-2.0 */
videojs.Java=videojs.MediaTechController.extend({init:function(a,b,c){var d=this;videojs.MediaTechController.call(this,a,b,c);var e=b.source,f=a.id()+"_java_api";this.player_=a;var g=a.height();a.controls()&&(g-=48);var h=videojs.util.mergeOptions({id:f,jscallbackfunction:"videojs.Java.onEvent",bgcolor:"#000000",permissions:"sandbox",java_status_events:"true"},b.params);a.options.autoplay&&(h.autoplay=a.options.autoplay),a.options.preload&&(h.preload=a.options.preload);var i=videojs.util.mergeOptions({id:f,name:f,"class":"vjs-tech",style:"visibility: hidden; width: "+a.width()+"px !important; height: "+g+"px !important;"},b.attributes);e&&this.ready(function(){this.setSrc(e.src)});var j=b.parentEl,k=this.el_=videojs.Component.prototype.createEl("div",{id:a.id()+"temp_java"});j.firstChild?j.insertBefore(k,j.firstChild):j.appendChild(k),a.ready(function(){a.trigger("loadstart")}),this.el_=videojs.Java.embed(k,h,i),this.el_.tech=this,this.el_.status<2?this.el_.onLoad=function(){d.triggerReady()}:this.triggerReady()}}),videojs.Java.prototype.params=[],videojs.Java.prototype.dispose=function(){this.el_&&this.el_.parentNode.removeChild(this.el_),videojs.MediaTechController.prototype.dispose.call(this)},videojs.Java.prototype.src=function(a){return void 0===a?this.currentSrc():this.setSrc(a)},videojs.Java.prototype.setSrc=function(a){a=videojs.Java.getAbsoluteURL(a),this.getApi().setSrc(a)},videojs.Java.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:""},videojs.Java.prototype.load=function(){this.getApi().loadMedia()},videojs.Java.prototype.play=function(){this.getApi().playMedia();var a=this.player_.controls();a&&this.player_.controls(!1),this.el_.style.visibility="visible",a&&this.player_.controls(!0)},videojs.Java.prototype.ended=function(){var a=this.getApi().getPlayerStatus();return 2!==a&&3!==a},videojs.Java.prototype.pause=function(){this.getApi().pauseMedia()},videojs.Java.prototype.paused=function(){var a=this.getApi().getPlayerStatus();return 2!==a},videojs.Java.prototype.currentTime=function(){return this.getApi().getCurrentTime()},videojs.Java.prototype.setCurrentTime=function(a){this.getApi().setCurrentTime(a)},videojs.Java.prototype.duration=function(){return this.getApi().getDuration()},videojs.Java.prototype.buffered=function(){return[]},videojs.Java.prototype.volume=function(){return this.getApi().getVolume()},videojs.Java.prototype.setVolume=function(a){a&&this.getApi().setVolume(a)},videojs.Java.prototype.muted=function(){return this.getApi().getMute()},videojs.Java.prototype.setMuted=function(a){this.getApi().setMute(a)},videojs.Java.prototype.supportsFullScreen=function(){return!0},videojs.Java.prototype.enterFullScreen=function(){this.getApi().enterFullscreen()},videojs.Java.prototype.exitFullScreen=function(){this.getApi().leaveFullscreen()},videojs.Java.prototype.getApi=function(){return this.el_},videojs.Java.onEvent=function(a,b){var c=document.getElementById(a);if(c.tech)switch(b){case"init":c.tech.triggerReady();break;default:c.tech.player_.trigger(b)}},videojs.Java.embed=function(a,b,c){var d=videojs.Java.getEmbedCode(b,c),e=videojs.Component.prototype.createEl("div",{innerHTML:d}).childNodes[0];return a.parentNode.replaceChild(e,a),e},videojs.Java.getEmbedCode=function(a,b){var c,d='<applet code="com.videojs.java.JavaPlayer" archive="'+videojs.options.java.jar+'" ',e="",f="";for(c in a)e+='<param name="'+c+'" value="'+a[c]+'" />';for(c in b)f+=c+'="'+b[c]+'" ';return d+=f+">"+e+"</applet>"},videojs.Java.getAbsoluteURL=function(a){return a.match(/^https?:\/\//)||(a=videojs.Component.prototype.createEl("div",{innerHTML:'<a href="'+a+'">x</a>'}).firstChild.href),a},videojs.options.java={jar:"video-js.jar"},videojs.Java.isSupported=function(){return"undefined"!=typeof deployJava?deployJava.versionCheck("1.7"):navigator.javaEnabled()},videojs.Java.formats={"audio/aiff":"AIFF","audio/wav":"WAV","video/msvideo":"AVI","video/avi":"AVI","audio/x-gsm":"GSM","audio/midi":"MID","video/mpeg":"MPG","video/quicktime":"MOV","audio/basic":"AU"},videojs.Java.canPlaySource=function(a){if(!a.type)return"";var b=a.type.replace(/;.*/,"").toLowerCase();return b in videojs.Java.formats?"maybe":""};